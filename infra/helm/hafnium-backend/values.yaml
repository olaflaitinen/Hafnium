# Default values for hafnium-backend
# This is a YAML-formatted file.

global:
  imageRegistry: ""
  imagePullSecrets: []
  environment: dev

# Common settings for all services
common:
  replicaCount: 2
  image:
    pullPolicy: IfNotPresent
  resources:
    requests:
      memory: "512Mi"
      cpu: "250m"
    limits:
      memory: "1Gi"
      cpu: "1000m"
  
  podSecurityContext:
    runAsNonRoot: true
    runAsUser: 1000
    fsGroup: 1000
  
  containerSecurityContext:
    allowPrivilegeEscalation: false
    capabilities:
      drop:
        - ALL
    readOnlyRootFilesystem: true

# Database configuration
database:
  host: postgres
  port: 5432
  name: hafnium
  existingSecret: hafnium-db-credentials

# Kafka configuration
kafka:
  bootstrapServers: redpanda:9092

# Keycloak configuration
keycloak:
  authServerUrl: http://keycloak:8080
  realm: hafnium

# OPA configuration
opa:
  url: http://opa:8181
  failOpen: false

# Redis configuration
redis:
  host: redis
  port: 6379

# Service-specific overrides
services:
  identity:
    enabled: true
    image:
      repository: hafnium/identity-service
      tag: latest
    port: 8080

  screening:
    enabled: true
    image:
      repository: hafnium/screening-service
      tag: latest
    port: 8080

  monitoring:
    enabled: true
    image:
      repository: hafnium/monitoring-service
      tag: latest
    port: 8080

  cases:
    enabled: true
    image:
      repository: hafnium/case-service
      tag: latest
    port: 8080

  vault:
    enabled: true
    image:
      repository: hafnium/vault-service
      tag: latest
    port: 8080

  riskEngine:
    enabled: true
    image:
      repository: hafnium/risk-engine-service
      tag: latest
    port: 8080

  signals:
    enabled: true
    image:
      repository: hafnium/signals-service
      tag: latest
    port: 8080

  apiFacade:
    enabled: true
    image:
      repository: hafnium/api-facade
      tag: latest
    port: 8080

# Ingress configuration
ingress:
  enabled: false
  className: nginx
  annotations: {}
  hosts:
    - host: hafnium.local
      paths:
        - path: /
          pathType: Prefix

# Autoscaling
autoscaling:
  enabled: true
  minReplicas: 2
  maxReplicas: 10
  targetCPUUtilizationPercentage: 70
  targetMemoryUtilizationPercentage: 80

# Pod Disruption Budget
podDisruptionBudget:
  enabled: true
  minAvailable: 1

# Network Policies
networkPolicy:
  enabled: true
